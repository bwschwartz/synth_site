!function(){var e={0:function(e){e.exports=class{constructor(e,t){const n=t.createGain();return n.gain.value=0,e.disconnect(),e.connect(n).connect(t.destination),n}}},931:function(e){e.exports=class{constructor(e,t,n){this.audioCtx=e,this.oscArray=t,this.ampKnobArray=n,this.params=null,this.sender=null,this.receiver=null,this.color=null,this.colors=["cornsilk","paleogoldenrod","aliceblue","firebrick","azure","bisque"]}init(){this.setUpEventListeners()}sendParams(e){this.sender=e.target.id,this.params={waveform:this.sender.slice(0,3),oscNum:this.sender.slice(this.sender.length-1)-1},this.color=this.colors[Math.floor(8*Math.random())],console.log(this.sender),document.querySelector(`#${this.sender}`).style.backgroundColor=this.color,this.sender=null}receiveParams(e){if(this.params){const t=this.oscArray[this.params.oscNum],n=e.target.id.slice(e.target.id.length-1)-1;this.ampKnobArray[n].updateOscillator(t,this.params.waveform),this.params=null,document.querySelector(`#${e.target.id}`).style.backgroundColor=this.color}}setUpEventListeners(){document.querySelector("#sin-out1").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#sin-out2").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#sin-out3").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#sin-out4").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#sqr-out1").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#sqr-out2").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#sqr-out3").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#sqr-out4").addEventListener("mousedown",this.sendParams.bind(this)),document.querySelector("#amp-in1").addEventListener("mousedown",this.receiveParams.bind(this)),document.querySelector("#amp-in2").addEventListener("mousedown",this.receiveParams.bind(this)),document.querySelector("#amp-in3").addEventListener("mousedown",this.receiveParams.bind(this)),document.querySelector("#amp-in4").addEventListener("mousedown",this.receiveParams.bind(this))}}},238:function(e){e.exports=class{makeContext(){return new(window.AudioContext||window.webkitAudioContext)}}},345:function(e){e.exports=class{init(){this.makeDraggable(),this.makeClassDraggable(),this.makeVcoDraggable(),this.makeVcaDraggable()}makeDraggable(){$("#draggable").draggable()}makeClassDraggable(){$("#draggable1").draggable()}makeVcoDraggable(){$("#draggablevco").draggable()}makeVcaDraggable(){$("#draggablevca").draggable()}}},126:function(e){e.exports=class{constructor(e,t){this.inNum=e,this.type=t||"amp"}activateInput(){const e=document.querySelector(`#${this.type}-in${this.inNum}`);console.log(e),e.addEventListener("mousedown",this.test)}test(){console.log("responds to mousedown")}}},987:function(e){e.exports=class{init(e,t){const n=e.createOscillator();return n.type="sine",n.frequency.setValueAtTime(220,e.currentTime),n.connect(e.destination),document.querySelector(".start-button").addEventListener("click",(function(){n.start()})),n}}}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}!function(){"use strict";class e{constructor(e,t,n,s){this.osc=e,this.audioCtx=t,this.knobNum=n||1,this.amp=s||"",this.knob=document.querySelector(`#${this.amp}knob${this.knobNum}`)}translateValues(e){this.osc.frequency.setValueAtTime(e,this.audioCtx.currentTime)}getContainer(){return document.querySelector(".vco")}getKnobValues(e){const t=this.getContainer(),n=this.knob.clientWidth/2,s=this.knob.clientHeight/2;let o;o=""===this.amp?e.pageX-(t.offsetLeft+this.knob.offsetLeft):e.pageX-(t.offsetLeft+this.knob.offsetLeft+45);const i=n-o,r=s-(e.pageY-(t.offsetTop+this.knob.offsetTop));return Math.atan2(r,i)*(180/Math.PI)}runKnob(){const e=document.querySelector(`#${this.amp}knob${this.knobNum}`),t=function(t){let n=Math.floor(this.getKnobValues(t)-80);e.style.transform=`rotate(${n}deg)`,n<0&&(n=360+n),n=this.translateValues(n)}.bind(this);function n(){e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",n)}e.addEventListener("mousedown",(function(s){e.addEventListener("mousemove",t),e.addEventListener("mouseup",n),s.stopPropagation()}))}}class t extends e{}class s extends e{constructor(e,t,n,s,o){super(e,t,n,s),this.gainNode=o}updateOscillator(e,t){this.osc.disconnect(),this.osc=e,this.osc.disconnect(),this.osc.type="sqr"===t?"square":"sine",e.connect(this.gainNode).connect(this.audioCtx.destination)}translateValues(e){const t=e/360;return this.gainNode.gain.exponentialRampToValueAtTime(t,this.audioCtx.currentTime+.1),t}getContainer(){return document.querySelector(".vca")}}const o=n(987);let i=new o,r=new o,a=new o,c=new o;const u=new(n(345)),d=(new(n(238))).makeContext(),l=n(0),m=(n(126),n(931));document.addEventListener("DOMContentLoaded",(()=>{u.init(),i=i.init(d,1),r=r.init(d,2),a=a.init(d,3),c=c.init(d,4);const e=[i,r,a,c],n=new t(i,d,1),o=new t(r,d,2),h=new t(a,d,3),b=new t(c,d,4);n.runKnob(),o.runKnob(),h.runKnob(),b.runKnob();const g=new l(i,d),p=new l(r,d),v=new l(a,d),w=new l(c,d),f=new s(i,d,1,"amp",g),y=new s(r,d,2,"amp",p),q=new s(a,d,3,"amp",v),k=new s(c,d,4,"amp",w),L=[f,y,q,k];f.runKnob(),y.runKnob(),q.runKnob(),k.runKnob(),new m(d,e,L).init()}))}()}();
//# sourceMappingURL=main.js.map